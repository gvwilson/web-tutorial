<html>
<head>
<link href="../static/picnic.css" rel="stylesheet" type="text/css"/>
<link href="../static/site.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<h1>An Hour of JavaScript</h1>
<ul>
<li>Install <a href="https://deno.com/">deno</a> for command-line JavaScript</li>
</ul>
<h2>Variables, Types, and Control Flow</h2>
<pre id="console_log.js"><code class="language-js">console.log('hello, world');
</code></pre>
<ul>
<li>Run program as <code>deno run program.js</code></li>
<li><code>console</code> is a built-in module</li>
<li>Use the same dotted notation as Python</li>
<li>Trailing semi-colon is no longer required but commonly used</li>
</ul>
<pre id="loop_if_truthiness.js"><code class="language-js">const values = [0, 1, '', 'text', undefined, null, [], [2, 3]];
for (const val of values) {
    const type = typeof val;
    if (val) {
        console.log(`val '${val}' of type ${type} seems true`);
    } else {
        console.log(`val '${val}' of type ${type} seems false`);
    }
}
</code></pre>
<ul>
<li><code>const</code> defines a constant</li>
<li>The array contents aren't constant: the reference is</li>
<li><code>for…in</code> loops over the contents of an array</li>
<li>Use <code>for…of</code> to loop over indices</li>
<li>Parentheses are required</li>
<li><code>typeof</code> is an operator not a function, and returns a string</li>
<li><code>if</code> / <code>else if</code> / <code>else</code> work as expected</li>
<li>Use back-quotes and <code>${…}</code> for string interpolation</li>
<li>JavaScript considers an empty array to be truthy</li>
<li>Always use <code>===</code> (triple equals) and <code>!==</code> for equality</li>
<li>Otherwise JavaScript does some strange type conversions</li>
</ul>
<h2>Objects</h2>
<pre id="object_access.js"><code class="language-js">const person = {
    'staff_id': 31,
    'personal': 'Loan',
    'family': 'Nguyen'
};
console.log(`personal: ${person.personal}`);
console.log(`family: ${person['family']}`);
</code></pre>
<ul>
<li>JavaScript objects are (kind of) like Python dictionaries</li>
<li>Create so many of these that keys don't have to be quoted</li>
</ul>
<pre id="object_unquoted.js"><code class="language-js">const person = {
    staff_id: 31,
    personal: 'Loan',
    family: 'Nguyen'
};
console.log(`personal: ${person.personal}`);
</code></pre>
<ul>
<li>Can use variables' names and values to construct objects</li>
</ul>
<pre id="object_variables_as_fields.js"><code class="language-js">const staff_id = 31;
const personal = 'Loan';
const family = 'Nguyen';
const person = {staff_id, personal, family};
console.log(`person: ${JSON.stringify(person)}`);
</code></pre>
<ul>
<li><code>JSON</code> is another built-in module</li>
<li>Its <code>stringify</code> function does what its name suggests</li>
<li>Without this, <code>person</code> is displayed as <code>[Object object]</code></li>
</ul>
<h2>Functions</h2>
<pre id="function_def_and_call.js"><code class="language-js">function limits (values) {
  if (!values.length) {
    return [undefined, undefined];
  }
  let low = values[0];
  let high = values[0];
  for (let v of values) {
    if (v &lt; low) {
        low = v;
    }
    if (v &gt; high) {
        high = v;
    }
  }
  return [low, high]
}

const result = limits([1, -3, 2, 7]);
console.log(result);
</code></pre>
<ul>
<li><code>let</code> introduces a variable</li>
<li>The older <code>var</code> is still sometimes used</li>
<li>Functions take parameters, create a scope, etc.</li>
</ul>
<pre id="arrow_function.js"><code class="language-js">const largest = (left, right) =&gt; {
    if (left &lt; right) {
        return left;
    } else {
        return right;
    }
}

console.log(`largest(3, 5) is ${largest(3, 5)}`);
</code></pre>
<ul>
<li>A function is just another kind of object</li>
<li>Can define using arrow notation and then assign to a variable</li>
<li>Handy in a language that uses lots of little functions</li>
</ul>
<pre id="higher_order_func.js"><code class="language-js">const values = [1, -3, 5, -7];

const is_positive = values.map((v) =&gt; v &gt;= 0);
console.log(`is_positive: ${is_positive}`);

const keep_positive = values.filter(v =&gt; v &gt;= 0);
console.log(`keep_positive: ${keep_positive}`);

const print_positive = values.forEach(v =&gt; {
    if (v &gt;= 0) {
        console.log(v);
    }
});
</code></pre>
<h2>Asynchronous Operations</h2>
<pre id="promises.js"><code class="language-js">const middle = Deno.readTextFile("middle.txt");
console.log(`middle is ${middle}`);
middle.then(value =&gt; {
    console.log(`middle.then is ${value}`);
});
</code></pre>
<ul>
<li>A promise represents a delayed operation</li>
<li>Use <code>.then</code> method to tell JavaScript what to do when a value becomes available<ul>
<li>Use this a lot in web programming so that the browser won't freeze up</li>
</ul>
</li>
</ul>
<pre id="await.js"><code class="language-js">const value = await Deno.readTextFile("left.txt");
console.log(`left value is ${value}`);
</code></pre>
<ul>
<li><code>await</code> makes asynchronous operations more readable</li>
</ul>
</body>
<html>
</html></html>