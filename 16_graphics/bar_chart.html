<!DOCTYPE html>
<html>
  <head>
    <title>Bar Chart</title>
    <script src="/static/svg.js"></script>
    <script>
      const BAR_COLOR = '#3498db';
      
      function createBarChart(data, width, height, margin) {
	  // Create SVG drawing
	  const draw = SVG().addTo('body').size(width, height);

	  // Calculate chart dimensions
	  const chartWidth = width - 2 * margin;
	  const chartHeight = height - 2 * margin;

	  // Get keys and values from the data
	  const keys = Object.keys(data);
	  const values = Object.values(data);

	  // Calculate the maximum value for scaling
	  const maxValue = Math.max(...values);

	  // Calculate bar width and spacing
	  const barWidth = chartWidth / keys.length * 0.8;
	  const barSpacing = chartWidth / keys.length * 0.2;

	  // Draw bars and labels
	  keys.forEach((key, index) => {
	      const barHeight = chartHeight * data[key] / maxValue;
	      const x = margin + index * (barWidth + barSpacing);
	      const y = height - margin - barHeight;

	      // Draw bar
	      draw.rect(barWidth, barHeight)
		  .move(x, y)
		  .fill(BAR_COLOR);

	      // Draw label above bar
	      draw.text(data[key].toFixed())
		  .move(x + barWidth / 2, y - 20)
		  .font({ size: 12, anchor: 'middle' });

	      // Draw axis label
	      draw.text(key)
		  .move(x + barWidth / 2, height - margin + 5)
		  .font({ size: 12, anchor: 'start' })
		  .transform({ rotate: 90, origin: 'top left' });
	  });
      }

      function drawTheChart () {
	  const data = {
              "2023-11-01": 4,
	      "2023-11-02": 7,
	      "2023-11-03": 9,
	      "2023-11-04": 10,
	      "2023-11-05": 30,
	      "2023-11-06": 19,
	      "2023-11-07": 35,
	      "2023-11-08": 39,
	      "2023-11-09": 44,
	      "2023-11-10": 54
	  };
	  createBarChart(data, 600, 400, 50);
      }
    </script>
  </head>
  <body onload="drawTheChart()">
  </body>
</html>
